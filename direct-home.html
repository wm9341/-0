<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¹­äº‘é›†å›¢æ´»åŠ¨å¹³å° - é¦–é¡µ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }
        
        .header {
            background: linear-gradient(135deg, #1890ff 0%, #096dd9 100%);
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            text-decoration: none;
            color: white;
        }
        
        .nav {
            display: flex;
            align-items: center;
        }
        
        .nav-list {
            display: flex;
            list-style: none;
            margin-right: 20px;
        }
        
        .nav-item {
            margin-left: 20px;
        }
        
        .nav-link {
            color: white;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .login-btn, .register-btn {
            padding: 8px 16px;
            border: 1px solid white;
            background-color: transparent;
            color: white;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
            transition: all 0.3s;
        }
        
        .login-btn:hover, .register-btn:hover {
            background-color: white;
            color: #1890ff;
        }
        
        .main {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }
        
        .activity-list {
            text-align: center;
        }
        
        .activity-list h2 {
            font-size: 32px;
            margin-bottom: 30px;
            color: #1890ff;
        }
        
        .activities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            justify-items: center;
        }
        
        .activity-card {
            width: 100%;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .activity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }
        
        .card-image {
            height: 180px;
            border-radius: 8px 8px 0 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }
        
        .detail-image {
            width: 100%;
            height: 300px;
            border-radius: 8px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 24px;
        }
        
        .image-text {
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .card-content {
            padding: 20px;
            text-align: left;
        }
        
        .card-title {
            font-size: 20px;
            margin-bottom: 10px;
            color: #333;
        }
        
        .card-time, .card-participants {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            color: #666;
            font-size: 14px;
        }
        
        .time-icon, .participants-icon {
            margin-right: 5px;
        }
        
        .card-description {
            margin: 15px 0;
            color: #666;
            line-height: 1.5;
            height: 72px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
        }
        
        .card-actions {
            margin-top: 20px;
            text-align: center;
        }
        
        .view-btn {
            display: inline-block;
            padding: 8px 20px;
            background-color: #1890ff;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        .view-btn:hover {
            background-color: #096dd9;
        }
        
        .no-activities {
            margin-top: 60px;
            color: #999;
            font-size: 18px;
        }
        
        .loading {
            margin-top: 60px;
            text-align: center;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f0f0f0;
            border-top: 4px solid #1890ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .footer {
            background-color: #333;
            color: white;
            padding: 40px 0;
            margin-top: 60px;
        }
        
        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .footer-logo {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .footer-links {
            display: flex;
            margin-bottom: 20px;
        }
        
        .footer-link {
            color: white;
            text-decoration: none;
            margin: 0 15px;
        }
        
        .footer-copyright {
            color: #999;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                padding: 20px;
            }
            
            .logo {
                margin-bottom: 20px;
            }
            
            .nav-list {
                margin-right: 0;
                margin-bottom: 15px;
            }
            
            .nav {
                flex-direction: column;
            }
            
            .activities-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-container">
            <a href="#" class="logo">é¹­äº‘é›†å›¢æ´»åŠ¨å¹³å°</a>
            <nav class="nav">
                <ul class="nav-list">
                    <li class="nav-item"><a href="#" class="nav-link">é¦–é¡µ</a></li>
                    <li class="nav-item"><a href="#" class="nav-link">æ´»åŠ¨</a></li>
                </ul>
                <button class="login-btn">ç™»å½•</button>
                <button class="register-btn">æ³¨å†Œ</button>
            </nav>
        </div>
    </header>

    <main class="main">
        <div class="activity-list">
            <h2>æœ€æ–°æ´»åŠ¨</h2>
            <div class="activities-grid">
                <!-- æ´»åŠ¨å¡ç‰‡1 -->
                <div class="activity-card">
                    <div class="card-image" style="background-color: #1890ff;"><div class="image-text">å—èˆªä¼šå‘˜æ—¥</div></div>
                    <div class="card-content">
                        <h3 class="card-title">å—èˆªä¼šå‘˜æ—¥ç‰¹æƒ æ´»åŠ¨</h3>
                        <p class="card-time">
                            <span class="time-icon">ğŸ•’</span> 2023-12-15 10:00
                        </p>
                        <p class="card-participants">
                            <span class="participants-icon">ğŸ‘¥</span> 128äººå‚ä¸
                        </p>
                        <p class="card-description">
                            å—èˆªä¼šå‘˜ä¸“äº«æŠ˜æ‰£ï¼Œå›½å†…èˆªçº¿ä½è‡³5æŠ˜ï¼Œå›½é™…èˆªçº¿7æŠ˜èµ·ã€‚æ´»åŠ¨æœŸé—´è´­ä¹°æœºç¥¨è¿˜å¯è·å¾—åŒå€é‡Œç¨‹ç§¯åˆ†ã€‚åé¢æœ‰é™ï¼Œå…ˆåˆ°å…ˆå¾—ï¼
                        </p>
                        <div class="card-actions">
                            <a href="#" class="view-btn">æŸ¥çœ‹è¯¦æƒ…</a>
                        </div>
                    </div>
                </div>

                <!-- æ´»åŠ¨å¡ç‰‡2 -->
                <div class="activity-card">
                    <div class="card-image" style="background-color: #52c41a;"><div class="image-text">é¹­äº‘é›†å›¢ä¼˜æƒ </div></div>
                    <div class="card-content">
                        <h3 class="card-title">é¹­äº‘é›†å›¢ç¯çƒæ—…è¡Œä¼˜æƒ </h3>
                        <p class="card-time">
                            <span class="time-icon">ğŸ•’</span> 2024-01-05 09:30
                        </p>
                        <p class="card-participants">
                            <span class="participants-icon">ğŸ‘¥</span> 85äººå‚ä¸
                        </p>
                        <p class="card-description">
                            é¹­äº‘é›†å›¢æˆå‘˜èˆªç©ºå…¬å¸è”åˆæ¨å‡ºç¯çƒæ—…è¡Œå¥—ç¥¨ï¼Œä¸€æ¬¡è´­ä¹°å¤šæ®µèˆªç¨‹äº«æ›´å¤šä¼˜æƒ ã€‚æ”¯æŒçµæ´»å˜æ›´è¡Œç¨‹ï¼Œæ»¡è¶³æ‚¨çš„æ—…è¡Œéœ€æ±‚ã€‚
                        </p>
                        <div class="card-actions">
                            <a href="#" class="view-btn">æŸ¥çœ‹è¯¦æƒ…</a>
                        </div>
                    </div>
                </div>

                <!-- æ´»åŠ¨å¡ç‰‡3 -->
                <div class="activity-card">
                    <div class="card-image" style="background-color: #faad14;"><div class="image-text">æ–°å¹´ä¿ƒé”€</div></div>
                    <div class="card-content">
                        <h3 class="card-title">æ–°å¹´æœºç¥¨ä¿ƒé”€æ´»åŠ¨</h3>
                        <p class="card-time">
                            <span class="time-icon">ğŸ•’</span> 2024-01-20 14:00
                        </p>
                        <p class="card-participants">
                            <span class="participants-icon">ğŸ‘¥</span> 203äººå‚ä¸
                        </p>
                        <p class="card-description">
                            è¿æ¥æ–°å¹´ï¼Œå—èˆªæ¨å‡ºæœºç¥¨ä¿ƒé”€æ´»åŠ¨ï¼Œçƒ­é—¨åŸå¸‚èˆªçº¿ä½è‡³4æŠ˜ã€‚æå‰30å¤©é¢„è®¢è¿˜å¯äº«å—é¢å¤–9æŠ˜ä¼˜æƒ ã€‚æ˜¥èŠ‚å‡ºè¡Œçš„æ—…å®¢ä¸è¦é”™è¿‡ï¼
                        </p>
                        <div class="card-actions">
                            <a href="#" class="view-btn">æŸ¥çœ‹è¯¦æƒ…</a>
                        </div>
                    </div>
                </div>

                <!-- æ´»åŠ¨å¡ç‰‡4 -->
                <div class="activity-card">
                    <div class="card-image" style="background-color: #eb2f96;"><div class="image-text">ä¼šå‘˜ä¸“äº«</div></div>
                    <div class="card-content">
                        <h3 class="card-title">é«˜ç«¯ä¼šå‘˜ä¸“äº«æ´»åŠ¨</h3>
                        <p class="card-time">
                            <span class="time-icon">ğŸ•’</span> 2024-02-10 15:30
                        </p>
                        <p class="card-participants">
                            <span class="participants-icon">ğŸ‘¥</span> 42äººå‚ä¸
                        </p>
                        <p class="card-description">
                            å—èˆªæ˜ç é‡‘é“¶å¡ä¼šå‘˜ä¸“äº«æ´»åŠ¨ï¼Œå‚ä¸å³å¯è·å¾—ä¼˜å…ˆç™»æœºã€é¢å¤–è¡Œæé¢ã€è´µå®¾å®¤ä½“éªŒç­‰ç‰¹æƒã€‚æ›´æœ‰æœºä¼šè·å¾—å…è´¹å‡èˆ±åˆ¸ã€‚
                        </p>
                        <div class="card-actions">
                            <a href="#" class="view-btn">æŸ¥çœ‹è¯¦æƒ…</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-logo">é¹­äº‘é›†å›¢æ´»åŠ¨å¹³å°</div>
            <div class="footer-links">
                <a href="#" class="footer-link">è”ç³»æˆ‘ä»¬</a>
                <a href="#" class="footer-link">éšç§æ”¿ç­–</a>
                <a href="#" class="footer-link">ç”¨æˆ·åè®®</a>
            </div>
            <div class="footer-copyright">
                Â© 2023 é¹­äº‘é›†å›¢æ´»åŠ¨å¹³å°. ä¿ç•™æ‰€æœ‰æƒåˆ©.
            </div>
        </div>
    </footer>

    <style>
        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 8px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.3);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .modal-header h2 {
            margin: 0;
            color: #333;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #999;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: all 0.3s;
        }
        
        .close-btn:hover {
            background-color: #f0f0f0;
            color: #666;
        }
        
        /* è¡¨å•æ ·å¼ */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }
        
        .form-group input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #1890ff;
            box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
        }
        
        .submit-btn {
            width: 100%;
            padding: 10px 20px;
            background-color: #1890ff;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .submit-btn:hover {
            background-color: #096dd9;
        }
        
        .submit-btn:disabled {
            background-color: #d9d9d9;
            cursor: not-allowed;
        }
        
        .error-message {
            color: #ff4d4f;
            margin-bottom: 15px;
            padding: 8px 12px;
            background-color: #fff2f0;
            border: 1px solid #ffccc7;
            border-radius: 4px;
        }
        
        /* ç”¨æˆ·ä¿¡æ¯åŒºåŸŸæ ·å¼ */
        .user-info {
            display: flex;
            align-items: center;
            color: white;
        }
        
        .user-name {
            margin-right: 15px;
        }
        
        .logout-btn {
            padding: 6px 12px;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .logout-btn:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }
        
        /* æ´»åŠ¨è¯¦æƒ…é¡µé¢æ ·å¼ */
        .activity-detail {
            background-color: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .detail-header {
            margin-bottom: 30px;
        }
        
        .detail-title {
            font-size: 28px;
            margin-bottom: 15px;
            color: #333;
        }
        
        .detail-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
            color: #666;
        }
        
        .detail-meta-item {
            display: flex;
            align-items: center;
        }
        
        .detail-meta-item i {
            margin-right: 8px;
        }
        
        .detail-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .detail-content {
            line-height: 1.8;
            color: #333;
            margin-bottom: 30px;
        }
        
        .join-btn {
            padding: 12px 30px;
            background-color: #52c41a;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .join-btn:hover {
            background-color: #389e0d;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .modal-content {
                width: 95%;
                padding: 20px;
            }
            
            .detail-meta {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .detail-image {
                height: 200px;
            }
        }
    </style>
    
    <!-- ç™»å½•æ¨¡æ€æ¡† -->
    <div id="login-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="login-modal-title">ç”¨æˆ·ç™»å½•</h2>
                <button class="close-btn" id="close-login">&times;</button>
            </div>
            <div id="login-error" class="error-message" style="display: none;"></div>
            <form id="login-form">
                <div class="form-group">
                    <label for="username">ç”¨æˆ·å</label>
                    <input type="text" id="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" required>
                </div>
                <div class="form-group">
                    <label for="password">å¯†ç </label>
                    <input type="password" id="password" placeholder="è¯·è¾“å…¥å¯†ç " required>
                </div>
                <div class="form-group" id="confirm-password-container">
                    <label for="confirm-password">ç¡®è®¤å¯†ç </label>
                    <input type="password" id="confirm-password" placeholder="è¯·å†æ¬¡è¾“å…¥å¯†ç " required>
                </div>
                <button type="submit" class="submit-btn" id="login-submit">ç™»å½•</button>
                <div class="switch-mode" style="text-align: center; margin-top: 15px;">
                    <span id="switch-text">è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ</span>
                    <a href="#" id="switch-link" style="color: #1890ff; cursor: pointer;">ç«‹å³æ³¨å†Œ</a>
                </div>
            </form>
        </div>
    </div>
    
    <!-- æ´»åŠ¨è¯¦æƒ…æ¨¡æ€æ¡† -->
    <div id="activity-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">æ´»åŠ¨è¯¦æƒ…</h2>
                <button class="close-btn" id="close-activity">&times;</button>
            </div>
            <div class="activity-detail" id="modal-detail">
                <!-- æ´»åŠ¨è¯¦æƒ…å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€å¡«å…… -->
            </div>
        </div>
    </div>
    
    <script>
        // æ´»åŠ¨æ•°æ®
        const activities = [
            {
                id: 1,
                title: "å—èˆªä¼šå‘˜æ—¥ç‰¹æƒ æ´»åŠ¨",
                time: "2023-12-15 10:00",
                participants: 128,
                image: "#1890ff",
                imageText: "å—èˆªä¼šå‘˜æ—¥",
                description: "å—èˆªä¼šå‘˜ä¸“äº«æŠ˜æ‰£ï¼Œå›½å†…èˆªçº¿ä½è‡³5æŠ˜ï¼Œå›½é™…èˆªçº¿7æŠ˜èµ·ã€‚æ´»åŠ¨æœŸé—´è´­ä¹°æœºç¥¨è¿˜å¯è·å¾—åŒå€é‡Œç¨‹ç§¯åˆ†ã€‚åé¢æœ‰é™ï¼Œå…ˆåˆ°å…ˆå¾—ï¼",
                details: "\nå—èˆªä¼šå‘˜æ—¥ç‰¹æƒ æ´»åŠ¨è¯¦æƒ…ï¼š\n\næ´»åŠ¨æ—¶é—´ï¼š2023å¹´12æœˆ15æ—¥ 10:00 - 2023å¹´12æœˆ20æ—¥ 24:00\n\næ´»åŠ¨å†…å®¹ï¼š\n1. å›½å†…èˆªçº¿ä½è‡³5æŠ˜ä¼˜æƒ \n2. å›½é™…èˆªçº¿7æŠ˜èµ·\n3. æ´»åŠ¨æœŸé—´è´­ç¥¨å¯è·å¾—åŒå€é‡Œç¨‹ç§¯åˆ†\n4. ä¼šå‘˜ä¸“äº«é¢å¤–ç¤¼åŒ…\n\nå‚ä¸æ–¹å¼ï¼š\n- ç™»å½•å—èˆªå®˜ç½‘æˆ–APP\n- é€‰æ‹©ä¼šå‘˜æ—¥ç‰¹æƒ ä¸“åŒº\n- è¾“å…¥ä¼˜æƒ ç ï¼šCSAIRDAY\n\næ´»åŠ¨è§„åˆ™ï¼š\n- æœ¬æ´»åŠ¨ä»…é™å—èˆªæ˜ç ä¼šå‘˜å‚ä¸\n- ä¼˜æƒ ç¥¨æ•°é‡æœ‰é™ï¼Œå…ˆåˆ°å…ˆå¾—\n- ç‰¹ä»·ç¥¨é€€ç¥¨æ”¹ç­¾è§„åˆ™ä»¥å…·ä½“ç¥¨è§„ä¸ºå‡†\n- æ´»åŠ¨æœ€ç»ˆè§£é‡Šæƒå½’å—æ–¹èˆªç©ºæ‰€æœ‰"
            },
            {                id: 2,                title: "é¹­äº‘é›†å›¢ç¯çƒæ—…è¡Œä¼˜æƒ ",                time: "2024-01-05 09:30",                participants: 85,                image: "#52c41a",                imageText: "é¹­äº‘é›†å›¢ä¼˜æƒ ",                description: "é¹­äº‘é›†å›¢æˆå‘˜èˆªç©ºå…¬å¸è”åˆæ¨å‡ºç¯çƒæ—…è¡Œå¥—ç¥¨ï¼Œä¸€æ¬¡è´­ä¹°å¤šæ®µèˆªç¨‹äº«æ›´å¤šä¼˜æƒ ã€‚æ”¯æŒçµæ´»å˜æ›´è¡Œç¨‹ï¼Œæ»¡è¶³æ‚¨çš„æ—…è¡Œéœ€æ±‚ã€‚",                details: "\né¹­äº‘é›†å›¢ç¯çƒæ—…è¡Œä¼˜æƒ è¯¦æƒ…ï¼š\n\næ´»åŠ¨æ—¶é—´ï¼š2024å¹´1æœˆ5æ—¥ 09:30 - 2024å¹´2æœˆ28æ—¥ 24:00\n\nå‚ä¸èˆªç©ºå…¬å¸ï¼š\nå—æ–¹èˆªç©ºã€ä¸œæ–¹èˆªç©ºã€å¦é—¨èˆªç©ºã€æ³•å›½èˆªç©ºã€è·å…°çš‡å®¶èˆªç©ºç­‰é¹­äº‘é›†å›¢æˆå‘˜\n\næ´»åŠ¨å†…å®¹ï¼š\n1. ç¯çƒæ—…è¡Œå¥—ç¥¨æœ€ä½7æŠ˜èµ·\n2. ä¸€æ¬¡è´­ä¹°å¤šæ®µèˆªç¨‹å¯äº«å—é¢å¤–95æŠ˜\n3. å¥—ç¥¨æ”¯æŒçµæ´»å˜æ›´è¡Œç¨‹ï¼ˆéœ€æ”¯ä»˜å°‘é‡æ‰‹ç»­è´¹ï¼‰\n4. é¢å¤–èµ é€é¹­äº‘é›†å›¢ç²¾è‹±ä¼šå‘˜ç§¯åˆ†\n\nè¡Œç¨‹è§„åˆ’ï¼š\n- å¯é€‰æ‹©3-15ä¸ªèˆªæ®µ\n- æ”¯æŒé¡ºæ—¶é’ˆæˆ–é€†æ—¶é’ˆç¯çƒæ—…è¡Œ\n- æœ€çŸ­åœç•™æ—¶é—´3å¤©ï¼Œæœ€é•¿åœç•™æ—¶é—´1å¹´\n\né¢„è®¢æ–¹å¼ï¼š\n- ç™»å½•é¹­äº‘é›†å›¢å®˜ç½‘\n- è”ç³»å„æˆå‘˜èˆªç©ºå…¬å¸å®¢æœ\n- å‰å¾€æŒ‡å®šæ—…è¡Œç¤¾å’¨è¯¢"            },
            {
                id: 3,
                title: "æ–°å¹´æœºç¥¨ä¿ƒé”€æ´»åŠ¨",
                time: "2024-01-20 14:00",
                participants: 203,
                image: "#faad14",
                imageText: "æ–°å¹´ä¿ƒé”€",
                description: "è¿æ¥æ–°å¹´ï¼Œå—èˆªæ¨å‡ºæœºç¥¨ä¿ƒé”€æ´»åŠ¨ï¼Œçƒ­é—¨åŸå¸‚èˆªçº¿ä½è‡³4æŠ˜ã€‚æå‰30å¤©é¢„è®¢è¿˜å¯äº«å—é¢å¤–9æŠ˜ä¼˜æƒ ã€‚æ˜¥èŠ‚å‡ºè¡Œçš„æ—…å®¢ä¸è¦é”™è¿‡ï¼",
                details: "\næ–°å¹´æœºç¥¨ä¿ƒé”€æ´»åŠ¨è¯¦æƒ…ï¼š\n\næ´»åŠ¨æ—¶é—´ï¼š2024å¹´1æœˆ20æ—¥ 14:00 - 2024å¹´2æœˆ5æ—¥ 24:00\n\nä¿ƒé”€èˆªçº¿ï¼š\nåŒ—äº¬-ä¸Šæµ·ã€å¹¿å·-æ·±åœ³ã€ä¸Šæµ·-æˆéƒ½ã€åŒ—äº¬-å¹¿å·ç­‰çƒ­é—¨åŸå¸‚èˆªçº¿\n\næ´»åŠ¨å†…å®¹ï¼š\n1. çƒ­é—¨èˆªçº¿æœºç¥¨ä½è‡³4æŠ˜\n2. æå‰30å¤©é¢„è®¢å¯äº«å—é¢å¤–9æŠ˜\n3. è´­ä¹°å¾€è¿”æœºç¥¨èµ é€æœºåœºè´µå®¾å®¤ä½“éªŒåˆ¸\n4. å„¿ç«¥ç¥¨é¢å¤–ä¼˜æƒ \n\næ˜¥èŠ‚ç‰¹åˆ«ä¼˜æƒ ï¼š\n- æ˜¥èŠ‚æœŸé—´ï¼ˆ2024å¹´2æœˆ10æ—¥-2æœˆ17æ—¥ï¼‰å‡ºè¡Œçš„æ—…å®¢ï¼Œå¯è·å¾—æ–°å¹´ç¤¼å“ä¸€ä»½\n- å®¶åº­å‡ºè¡Œï¼ˆ2å¤§1å°åŠä»¥ä¸Šï¼‰å¯äº«å—å…è´¹å‡èˆ±æœºä¼š\n\næ³¨æ„äº‹é¡¹ï¼š\n- ç‰¹ä»·ç¥¨æ•°é‡æœ‰é™ï¼Œå…ˆåˆ°å…ˆå¾—\n- ä¼˜æƒ ä¸å¯ä¸å…¶ä»–æ´»åŠ¨åŒæ—¶ä½¿ç”¨\n- å…·ä½“æŠ˜æ‰£ä»¥å®é™…æŸ¥è¯¢ä¸ºå‡†"
            },
            {
                id: 4,
                title: "é«˜ç«¯ä¼šå‘˜ä¸“äº«æ´»åŠ¨",
                time: "2024-02-10 15:30",
                participants: 42,
                image: "#eb2f96",
                imageText: "ä¼šå‘˜ä¸“äº«",
                description: "å—èˆªæ˜ç é‡‘é“¶å¡ä¼šå‘˜ä¸“äº«æ´»åŠ¨ï¼Œå‚ä¸å³å¯è·å¾—ä¼˜å…ˆç™»æœºã€é¢å¤–è¡Œæé¢ã€è´µå®¾å®¤ä½“éªŒç­‰ç‰¹æƒã€‚æ›´æœ‰æœºä¼šè·å¾—å…è´¹å‡èˆ±åˆ¸ã€‚",
                details: "\né«˜ç«¯ä¼šå‘˜ä¸“äº«æ´»åŠ¨è¯¦æƒ…ï¼š\n\næ´»åŠ¨æ—¶é—´ï¼š2024å¹´2æœˆ10æ—¥ 15:30 - 2024å¹´3æœˆ31æ—¥ 24:00\n\nå‚ä¸èµ„æ ¼ï¼š\nå—èˆªæ˜ç é‡‘å¡ã€é“¶å¡ä¼šå‘˜\n\næ´»åŠ¨ç‰¹æƒï¼š\n1. ä¼˜å…ˆç™»æœºç‰¹æƒï¼ˆæ‰€æœ‰èˆªç­ï¼‰\n2. é¢å¤–10kgè¡Œæé¢\n3. å…è´¹æœºåœºè´µå®¾å®¤ä½“éªŒï¼ˆæ¯æœˆ2æ¬¡ï¼‰\n4. ä¸“å±å€¼æœºæŸœå°æœåŠ¡\n5. èˆªç­å»¶è¯¯ä¼˜å…ˆå®‰æ’\n\nç‰¹åˆ«å¥–åŠ±ï¼š\n- æ´»åŠ¨æœŸé—´ç´¯ç§¯é£è¡Œé‡Œç¨‹è¾¾åˆ°20000å…¬é‡Œï¼Œå¯è·å¾—å…è´¹å‡èˆ±åˆ¸ä¸€å¼ \n- æ´»åŠ¨æœŸé—´æ¨è3ä½æ–°ä¼šå‘˜åŠ å…¥ï¼Œå¯è·å¾—é¢å¤–5000å¥–åŠ±é‡Œç¨‹\n\nå‚ä¸æ–¹å¼ï¼š\n- ç™»å½•å—èˆªAPPä¼šå‘˜ä¸­å¿ƒï¼Œç‚¹å‡»\"é«˜ç«¯ä¼šå‘˜ä¸“äº«æ´»åŠ¨\"è¿›è¡ŒæŠ¥å\n- æ´»åŠ¨å¼€å§‹åè‡ªåŠ¨äº«å—ç›¸å…³ç‰¹æƒ\n\næ¸©é¦¨æç¤ºï¼š\nç‰¹æƒä½¿ç”¨éœ€å‡ºç¤ºç”µå­ä¼šå‘˜å¡ï¼Œå…·ä½“ä½¿ç”¨è§„åˆ™ä»¥å„æœºåœºå®é™…æ‰§è¡Œä¸ºå‡†"
            }
        ];
        
        // DOMå…ƒç´ 
        const loginModal = document.getElementById('login-modal');
        const closeLogin = document.getElementById('close-login');
        const loginForm = document.getElementById('login-form');
        const loginError = document.getElementById('login-error');
        const loginBtn = document.querySelector('.login-btn');
        const registerBtn = document.querySelector('.register-btn');
        const logoutBtn = document.createElement('button');
        logoutBtn.className = 'logout-btn';
        logoutBtn.textContent = 'é€€å‡º';
        const nav = document.querySelector('.nav');
        const navButtons = nav.querySelector('button:last-child').parentNode;
        
        const activityModal = document.getElementById('activity-modal');
        const closeActivity = document.getElementById('close-activity');
        const modalTitle = document.getElementById('modal-title');
        const modalDetail = document.getElementById('modal-detail');
        const viewButtons = document.querySelectorAll('.view-btn');
        
        // ç™»å½•/æ³¨å†Œåˆ‡æ¢å…ƒç´ 
        const switchText = document.getElementById('switch-text');
        const switchLink = document.getElementById('switch-link');
        const loginModalTitle = document.getElementById('login-modal-title');
        
        // ç”¨æˆ·çŠ¶æ€
        let currentUser = null;
        
        // æ£€æŸ¥localStorageä¸­çš„tokenï¼Œè‡ªåŠ¨ç™»å½•
        function checkAuthToken() {
            const token = localStorage.getItem('token');
            if (token) {
                fetch('http://localhost:5000/api/auth/me', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.username) {
                        currentUser = {
                            id: data.id,
                            username: data.username,
                            isAdmin: data.isAdmin
                        };
                    }
                    updateUserInterface();
                })
                .catch(error => {
                    console.error('Auth check error:', error);
                    localStorage.removeItem('token');
                    updateUserInterface();
                });
            } else {
                updateUserInterface();
            }
        }
        
        // æ‰“å¼€ç™»å½•æ¨¡æ€æ¡†
        function openLoginModal() {
            loginModalTitle.textContent = 'ç”¨æˆ·ç™»å½•';
            document.querySelector('#login-submit').textContent = 'ç™»å½•';
            document.getElementById('confirm-password-container').style.display = 'none';
            switchText.textContent = 'è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ';
            switchLink.textContent = 'ç«‹å³æ³¨å†Œ';
            loginModal.classList.add('active');
            loginError.style.display = 'none';
            loginForm.reset();
        }
        
        // æ‰“å¼€æ³¨å†Œæ¨¡æ€æ¡†
        function openRegisterModal() {
            loginModalTitle.textContent = 'ç”¨æˆ·æ³¨å†Œ';
            document.querySelector('#login-submit').textContent = 'æ³¨å†Œ';
            document.getElementById('confirm-password-container').style.display = 'block';
            switchText.textContent = 'å·²æœ‰è´¦å·ï¼Ÿ';
            switchLink.textContent = 'ç«‹å³ç™»å½•';
            loginModal.classList.add('active');
            loginError.style.display = 'none';
            loginForm.reset();
        }
        
        // åˆ‡æ¢ç™»å½•/æ³¨å†Œæ¨¡å¼
        switchLink.addEventListener('click', function(e) {
            e.preventDefault();
            if (loginModalTitle.textContent === 'ç”¨æˆ·ç™»å½•') {
                openRegisterModal();
            } else {
                openLoginModal();
            }
            loginError.style.display = 'none';
        });
        
        // å…³é—­ç™»å½•æ¨¡æ€æ¡†
        function closeLoginModal() {
            loginModal.classList.remove('active');
        }
        
        // æ‰“å¼€æ´»åŠ¨è¯¦æƒ…æ¨¡æ€æ¡†
        function openActivityModal(activityId) {
            const activity = activities.find(a => a.id === activityId);
            if (activity) {
                modalTitle.textContent = activity.title;
                
                // å¡«å……æ´»åŠ¨è¯¦æƒ…å†…å®¹
                modalDetail.innerHTML = `
                    <div class="detail-image" style="background-color: ${activity.image};"><div class="image-text">${activity.imageText}</div></div>
                    <div class="detail-meta">
                        <div class="detail-meta-item">
                            <i>ğŸ•’</i> ${activity.time}
                        </div>
                        <div class="detail-meta-item">
                            <i>ğŸ‘¥</i> ${activity.participants}äººå‚ä¸
                        </div>
                    </div>
                    <div class="detail-content">
                        ${activity.details.replace(/\n/g, '<br>')}
                    </div>
                    <button class="join-btn" onclick="joinActivity(${activity.id})">
                        ${currentUser ? 'ç«‹å³å‚ä¸' : 'ç™»å½•åå‚ä¸'}
                    </button>
                `;
                
                activityModal.classList.add('active');
            }
        }
        
        // å…³é—­æ´»åŠ¨è¯¦æƒ…æ¨¡æ€æ¡†
        function closeActivityModal() {
            activityModal.classList.remove('active');
        }
        
        // å¤„ç†ç™»å½•
        function handleLogin(event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // æ£€æŸ¥ç™»å½•æ¨¡æ€æ¡†æ ‡é¢˜ï¼Œåˆ¤æ–­æ˜¯ç™»å½•è¿˜æ˜¯æ³¨å†Œ
            const modalTitle = document.querySelector('#login-modal h2').textContent;
            
            if (modalTitle.includes('ç™»å½•')) {
                // ç™»å½•è¯·æ±‚
                fetch('http://localhost:5000/api/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ username, password })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.token) {
                        // ç™»å½•æˆåŠŸ
                        currentUser = {
                            id: data.user.id,
                            username: data.user.username,
                            isAdmin: data.user.isAdmin
                        };
                        
                        // ä¿å­˜tokenåˆ°localStorage
                        localStorage.setItem('token', data.token);
                        
                        // æ›´æ–°UIæ˜¾ç¤º
                        updateUserInterface();
                        closeLoginModal();
                        alert(`æ¬¢è¿ï¼Œ${username}ï¼`);
                    } else {
                        // ç™»å½•å¤±è´¥
                        loginError.textContent = data.message || 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯';
                        loginError.style.display = 'block';
                    }
                })
                .catch(error => {
                    loginError.textContent = 'ç™»å½•å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';
                    loginError.style.display = 'block';
                    console.error('Login error:', error);
                });
            } else {
                // éªŒè¯ä¸¤æ¬¡è¾“å…¥çš„å¯†ç æ˜¯å¦ä¸€è‡´
                const confirmPassword = document.getElementById('confirm-password').value;
                if (password !== confirmPassword) {
                    loginError.textContent = 'ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´';
                    loginError.style.display = 'block';
                    return;
                }
                
                // éªŒè¯ç”¨æˆ·åè§„åˆ™ï¼š3-5ä¸ªå­—ç¬¦
                if (username.length < 3 || username.length > 5) {
                    loginError.textContent = 'ç”¨æˆ·åå¿…é¡»ä¸º3-5ä¸ªå­—ç¬¦';
                    loginError.style.display = 'block';
                    return;
                }
                
                // éªŒè¯å¯†ç è§„åˆ™ï¼šè‡³å°‘6ä¸ªå­—ç¬¦ï¼ŒåŒ…å«æ•°å­—å’Œå­—æ¯
                const hasLetter = /[a-zA-Z]/.test(password);
                const hasNumber = /\d/.test(password);
                const hasMinLength = password.length >= 6;
                
                if (!hasMinLength) {
                    loginError.textContent = 'å¯†ç è‡³å°‘éœ€è¦6ä¸ªå­—ç¬¦';
                    loginError.style.display = 'block';
                    return;
                }
                
                if (!hasLetter || !hasNumber) {
                    loginError.textContent = 'å¯†ç å¿…é¡»åŒ…å«å­—æ¯å’Œæ•°å­—';
                    loginError.style.display = 'block';
                    return;
                }
                
                // æ³¨å†Œè¯·æ±‚
                fetch('http://localhost:5000/api/auth/register', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ username, password })
                    })
                .then(response => response.json())
                .then(data => {
                    if (data.token) {
                        // æ³¨å†ŒæˆåŠŸ
                        alert('æ³¨å†ŒæˆåŠŸï¼Œæ­£åœ¨ä¸ºæ‚¨è‡ªåŠ¨ç™»å½•...');
                        
                        // ç™»å½•ç”¨æˆ·
                        currentUser = {
                            id: data.user.id,
                            username: data.user.username,
                            isAdmin: data.user.isAdmin
                        };
                        
                        // ä¿å­˜tokenåˆ°localStorage
                        localStorage.setItem('token', data.token);
                        
                        // æ›´æ–°UIæ˜¾ç¤º
                        updateUserInterface();
                        closeLoginModal();
                    } else {
                        // æ³¨å†Œå¤±è´¥
                        loginError.textContent = data.message || 'æ³¨å†Œå¤±è´¥';
                        loginError.style.display = 'block';
                    }
                })
                .catch(error => {
                    loginError.textContent = 'æ³¨å†Œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';
                    loginError.style.display = 'block';
                    console.error('Registration error:', error);
                });
            }
        }
        
        // å¤„ç†é€€å‡ºç™»å½•
        function handleLogout() {
            console.log('Logout button clicked');
            currentUser = null;
            // æ¸…é™¤localStorageä¸­çš„token
            localStorage.removeItem('token');
            updateUserInterface();
            alert('æ‚¨å·²æˆåŠŸé€€å‡ºç™»å½•');
        }
        
        // æ›´æ–°ç”¨æˆ·ç•Œé¢
        function updateUserInterface() {
            const loginBtnElement = document.querySelector('.login-btn');
            const registerBtnElement = document.querySelector('.register-btn');
            const navButtonsContainer = loginBtnElement.parentNode;
            
            if (currentUser) {
                // ç”¨æˆ·å·²ç™»å½•
                if (loginBtnElement) navButtonsContainer.removeChild(loginBtnElement);
                if (registerBtnElement) navButtonsContainer.removeChild(registerBtnElement);
                
                // æ·»åŠ ç”¨æˆ·ä¿¡æ¯å’Œé€€å‡ºæŒ‰é’®
                if (!document.querySelector('.user-info')) {
                    const userInfo = document.createElement('div');
                    userInfo.className = 'user-info';
                    userInfo.innerHTML = `
                        <span class="user-name">æ¬¢è¿, ${currentUser.username}</span>
                    `;
                    userInfo.appendChild(logoutBtn);
                    navButtonsContainer.appendChild(userInfo);
                }
            } else {
                // ç”¨æˆ·æœªç™»å½•
                const userInfo = document.querySelector('.user-info');
                if (userInfo) navButtonsContainer.removeChild(userInfo);
                
                // ç¡®ä¿ç™»å½•å’Œæ³¨å†ŒæŒ‰é’®å­˜åœ¨
                if (!document.querySelector('.login-btn')) {
                    const loginBtnNew = document.createElement('button');
                    loginBtnNew.className = 'login-btn';
                    loginBtnNew.textContent = 'ç™»å½•';
                    loginBtnNew.addEventListener('click', openLoginModal);
                    navButtonsContainer.appendChild(loginBtnNew);
                }
                
                if (!document.querySelector('.register-btn')) {
                    const registerBtnNew = document.createElement('button');
                    registerBtnNew.className = 'register-btn';
                    registerBtnNew.textContent = 'æ³¨å†Œ';
                    registerBtnNew.addEventListener('click', function() {
                        openRegisterModal();
                    });
                    navButtonsContainer.appendChild(registerBtnNew);
                }
            }
        }
        
        // å‚ä¸æ´»åŠ¨
        function joinActivity(activityId) {
            if (currentUser) {
                const activity = activities.find(a => a.id === activityId);
                if (activity) {
                    activity.participants += 1;
                    alert(`æ‚¨å·²æˆåŠŸå‚ä¸æ´»åŠ¨ï¼š${activity.title}\nå½“å‰å‚ä¸äººæ•°ï¼š${activity.participants}`);
                    
                    // æ›´æ–°UIä¸Šçš„å‚ä¸äººæ•°
                    const card = document.querySelector(`.activity-card:nth-child(${activityId})`);
                    if (card) {
                        const participantsElement = card.querySelector('.card-participants');
                        if (participantsElement) {
                            participantsElement.innerHTML = `<span class="participants-icon">ğŸ‘¥</span> ${activity.participants}äººå‚ä¸`;
                        }
                    }
                }
            } else {
                alert('è¯·å…ˆç™»å½•');
                openLoginModal();
            }
        }
        
        // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
        document.addEventListener('DOMContentLoaded', function() {
            // ç™»å½•ç›¸å…³
            closeLogin.addEventListener('click', closeLoginModal);
            loginForm.addEventListener('submit', handleLogin);
            
            // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
            loginModal.addEventListener('click', function(e) {
                if (e.target === loginModal) closeLoginModal();
            });
            
            // æ³¨æ„ï¼šé€€å‡ºæŒ‰é’®çš„äº‹ä»¶ç›‘å¬å°†é€šè¿‡äº‹ä»¶å§”æ‰˜æ–¹å¼å®ç°ï¼Œè§ä¸‹æ–‡
            
            // æ´»åŠ¨è¯¦æƒ…ç›¸å…³
            closeActivity.addEventListener('click', closeActivityModal);
            
            // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
            activityModal.addEventListener('click', function(e) {
                if (e.target === activityModal) closeActivityModal();
            });
            
            // æŸ¥çœ‹è¯¦æƒ…æŒ‰é’®
            viewButtons.forEach((button, index) => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    openActivityModal(index + 1); // æ´»åŠ¨IDä»1å¼€å§‹
                });
            });
            
            // åˆå§‹åŒ–ç”¨æˆ·ç•Œé¢ï¼Œæ£€æŸ¥è®¤è¯çŠ¶æ€
            checkAuthToken();
            
            // ä½¿ç”¨äº‹ä»¶å§”æ‰˜ä¸ºç™»å½•ã€æ³¨å†Œå’Œé€€å‡ºæŒ‰é’®æ·»åŠ äº‹ä»¶ç›‘å¬ï¼Œç¡®ä¿åŠ¨æ€åˆ›å»ºçš„æŒ‰é’®ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ
            document.addEventListener('click', function(e) {
                console.log('ç‚¹å‡»äº‹ä»¶è§¦å‘ï¼Œç›®æ ‡å…ƒç´ :', e.target.className);
                if (e.target.matches('.login-btn')) {
                    console.log('ç™»å½•æŒ‰é’®è¢«ç‚¹å‡»');
                    openLoginModal();
                } else if (e.target.matches('.register-btn')) {
                    console.log('æ³¨å†ŒæŒ‰é’®è¢«ç‚¹å‡»');
                    openRegisterModal();
                } else if (e.target.matches('.logout-btn')) {
                    console.log('é€€å‡ºæŒ‰é’®è¢«ç‚¹å‡»');
                    handleLogout();
                }
            });
        });
        
        // å…¨å±€å‡½æ•°ï¼Œä¾›æ¨¡æ€æ¡†ä¸­çš„æŒ‰é’®è°ƒç”¨
        window.joinActivity = joinActivity;
    </script>
</body>
</html>